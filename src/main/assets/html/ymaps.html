<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style type="text/css">
        <!--
        html, body { height: 100%; }
        -->
    </style>
    <script src="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU"
            type="text/javascript"></script>
    <script>

var map;
var marker;
var track;
var start_image;
var start_marker;

function initialize() {
    var latitude = android.getLatitude();
    var longitude = android.getLongitude();
    map = new ymaps.Map('map-canvas', {
        center: [ latitude, longitude ],
        zoom: 17,
        options: {
            adjustZoomOnTypeChange: true
        }
    });
    map.controls.add('zoomControl', { left: 5, top: 5 })
    marker = new ymaps.Placemark([latitude, longitude]);
    map.geoObjects.add(marker);
    setTrack();
}

function update() {
    if (map == null)
        return;
    var latitude = android.getLatitude();
    var longitude = android.getLongitude();
    marker.setCoordinates([latitude, longitude]);
}

function center() {
    if (map == null)
        return;
    var latitude  = android.getLatitude();
    var longitude = android.getLongitude();
    map.setCenter([ latitude, longitude ]);
}

function setTrack() {
    var source = android.getTrack();
    if (source == null){
        if (track)
            track.setMap(null);
        track = null;
        return;
    }
    var points = (source + "").split('|');
    for (var i = 0; i < points.length; i++){
        var point = points[i].split(',');
        points[i] = [ point[0], point[1] ];
    }
    track = new ymaps.Polyline(points);            
    map.geoObjects.add(track);
}

ymaps.ready(initialize);



    </script>
</head>
<body>
<div id="map-canvas" style="width: 100%; height: 100%"></div>
</body>
</html>